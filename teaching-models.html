<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>教学模型展示 - ChemChen</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
        }
        
        .header {
            text-align: center;
            padding: 30px 20px;
            background: rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }
        
        .model-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .model-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }
        
        .chart-wrapper {
            height: 400px;
            margin: 20px 0;
            position: relative;
        }
        
        .chart-wrapper canvas {
            max-width: 100%;
            max-height: 100%;
            border-radius: 10px;
        }
        
        .code-section {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        
        .btn-teaching {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            border-radius: 25px;
            padding: 10px 20px;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .btn-teaching:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }
        
        .nav-back {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }
        
        .data-input-panel {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid rgba(255,255,255,0.3);
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: rgba(255,255,255,0.9);
        }
        
        .control-group input, .control-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 5px;
            font-size: 14px;
            background: rgba(255,255,255,0.1);
            color: white;
            box-sizing: border-box;
        }
        
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }
        
        .ingredient-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .ingredient-table th, .ingredient-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
        }
        
        .ingredient-table th {
            background: rgba(255,255,255,0.2);
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .input-row {
                grid-template-columns: 1fr;
            }
            
            .chart-wrapper {
                height: 300px;
            }
            
            .button-group {
                flex-direction: column;
                align-items: center;
            }
            
            .btn-teaching {
                width: 100%;
                max-width: 300px;
            }
            
            .ingredient-table {
                font-size: 12px;
            }
        }
        
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
    </style>
</head>
<body>
    <!-- 返回按钮 -->
    <a href="index.html" class="btn btn-teaching nav-back">← 返回主页</a>

    <div class="main-container">
        <div class="header">
            <h1>📊 Python matplotlib 教学模型展示</h1>
            <p class="lead">将Python数据可视化代码转换为交互式网页图表 - 支持自定义数据输入</p>
            <div class="button-group">
                <button class="btn-teaching" onclick="resetAllTeachingModels()">重置所有模型</button>
                <button class="btn-teaching" onclick="generateRandomForAll()">为所有模型生成随机数据</button>
            </div>
        </div>

        <!-- 正弦余弦曲线模型 -->
        <div class="model-section">
            <h3>📈 模型1: 正弦和余弦曲线</h3>
            <div class="chart-wrapper">
                <canvas id="sineCosineChart"></canvas>
            </div>
            
            <!-- 数据输入面板 -->
            <div class="data-input-panel">
                <h5>📝 自定义数据输入</h5>
                <div class="input-row">
                    <div class="control-group">
                        <label>正弦数据 (逗号分隔):</label>
                        <input type="text" id="sineData" value="65,59,80,81,56,55,40,75">
                    </div>
                    <div class="control-group">
                        <label>余弦数据 (逗号分隔):</label>
                        <input type="text" id="cosineData" value="28,48,40,19,86,27,90,60">
                    </div>
                </div>
                <div class="control-group">
                    <label>X轴标签 (逗号分隔):</label>
                    <input type="text" id="sineLabels" value="1月,2月,3月,4月,5月,6月,7月,8月">
                </div>
                <div class="button-group">
                    <button class="btn-teaching" onclick="updateSineCosineChart()">应用自定义数据</button>
                    <button class="btn-teaching" onclick="generateRandomSineCosine()">生成随机数据</button>
                    <button class="btn-teaching" onclick="resetSineCosine()">重置数据</button>
                </div>
            </div>
            
            <div class="code-section">
                <h5>Python 源码:</h5>
                <pre>
import numpy as np
import matplotlib.pyplot as plt
plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False
x = np.linspace(-np.pi, np.pi, 256, endpoint=True)
y1, y2 = np.sin(x), np.cos(x)
plt.plot(x, y1, x, y2)
# 设置 x 轴和 y 轴的标签
plt.xlabel("x轴")
plt.ylabel("y轴")
# 设置 x 轴的刻度范围和刻度标签
plt.xlim(x.min() * 1.5, x.max() * 1.5)
plt.xticks([-np.pi, -np.pi/2, 0, np.pi/2, np.pi], 
           [r'$-\pi$', r'$-\pi/2$', r'$0$', r'$\pi/2$', r'$\pi$'])
plt.show()</pre>
            </div>
        </div>

        <!-- 支付宝月账单模型 -->
        <div class="model-section">
            <h3>💰 模型2: 支付宝月账单报告</h3>
            <div class="chart-wrapper">
                <canvas id="alipayChart"></canvas>
            </div>
            
            <!-- 数据输入面板 -->
            <div class="data-input-panel">
                <h5>📝 自定义数据输入</h5>
                <div class="input-row">
                    <div class="control-group">
                        <label>购物 (%):</label>
                        <input type="number" id="alipayShopping" value="26.7" min="0" max="100" step="0.1">
                    </div>
                    <div class="control-group">
                        <label>餐饮美食 (%):</label>
                        <input type="number" id="alipayFood" value="33.3" min="0" max="100" step="0.1">
                    </div>
                </div>
                <div class="input-row">
                    <div class="control-group">
                        <label>交通出行 (%):</label>
                        <input type="number" id="alipayTransport" value="10.0" min="0" max="100" step="0.1">
                    </div>
                    <div class="control-group">
                        <label>休闲娱乐 (%):</label>
                        <input type="number" id="alipayEntertainment" value="8.7" min="0" max="100" step="0.1">
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn-teaching" onclick="updateAlipayChart()">应用自定义数据</button>
                    <button class="btn-teaching" onclick="generateRandomAlipay()">生成随机数据</button>
                    <button class="btn-teaching" onclick="resetAlipay()">重置数据</button>
                </div>
            </div>
            
            <div class="code-section">
                <h5>Python 源码:</h5>
                <pre>
kinds = ['购物','人情往来','餐饮美食','通信物流','生活日用','交通出行','休闲娱乐','其他']
money_scale = [800/3000, 100/3000, 1000/3000, 200/3000, 300/3000, 200/3000, 200/3000, 200/3000]
plt.pie(money_scale, autopct='%3.1f%%', shadow=True)
plt.title('支付宝月账单报告')
plt.legend(kinds, loc='upper right')
plt.show()</pre>
            </div>
        </div>

        <!-- 电影票房模型 -->
        <div class="model-section">
            <h3>🎬 模型3: 电影票房排名</h3>
            <div class="chart-wrapper">
                <canvas id="movieChart"></canvas>
            </div>
            
            <!-- 数据输入面板 -->
            <div class="data-input-panel">
                <h5>📝 自定义数据输入</h5>
                <div class="control-group">
                    <label>电影票房数据 (逗号分隔，单位:亿元):</label>
                    <input type="text" id="movieData" value="48.57,46.18,42.05,21.83,17.03,16.70,14.01,13.84,12.85,11.38,10.25,9.46,9.27,8.88,8.64">
                </div>
                <div class="control-group">
                    <label>电影名称 (逗号分隔):</label>
                    <textarea id="movieLabels" rows="3">哪吒之魔童降世,流浪地球,复仇者联盟4:终局之战,疯狂的外星人,飞驰人生,烈火英雄,蜘蛛侠:英雄远征,速度与激情:特别行动,扫毒2天地对决,大黄蜂,惊奇队长,比悲伤更悲伤的故事,哥斯拉2:怪兽之王,阿丽塔:战斗天使,银河补习班</textarea>
                </div>
                <div class="button-group">
                    <button class="btn-teaching" onclick="updateMovieChart()">应用自定义数据</button>
                    <button class="btn-teaching" onclick="generateRandomMovie()">生成随机数据</button>
                    <button class="btn-teaching" onclick="resetMovie()">重置数据</button>
                </div>
            </div>
            
            <div class="code-section">
                <h5>Python 源码:</h5>
                <pre>
import matplotlib.pyplot as plt
plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams["axes.unicode_minus"] = False
labels = ["哪吒之魔童降世", "流浪地球", "复仇者联盟4:终局之战", 
          "疯狂的外星人", "飞驰人生", "烈火英雄", "蜘蛛侠:英雄远征", 
          "速度与激情:特别行动", "扫毒2天地对决", "大黄蜂","惊奇队长", 
          "比悲伤更悲伤的故事", "哥斯拉2:怪兽之王", "阿丽塔:战斗天使", 
          "银河补习班"]
bar_width = [48.57, 46.18, 42.05, 21.83, 17.03, 16.70, 14.01, 13.84, 
             12.85, 11.38, 10.25, 9.46, 9.27, 8.88, 8.64]
y_data = range(len(labels))
fig = plt.figure()
ax = fig.add_subplot(111)
ax.barh(y_data, bar_width, height=0.2, color='orange') 
# 设置 x 轴和 y 轴的标签
ax.set_xlabel("总票房(亿元)")
ax.set_ylabel("电影名称")
# 设置 y 轴的刻度线位置、刻度标签
ax.set_yticks(y_data)
ax.set_yticklabels(labels)
plt.show()</pre>
            </div>
        </div>

        <!-- 汽车制动距离模型 -->
        <div class="model-section">
            <h3>🚗 模型4: 汽车速度与制动距离</h3>
            <div class="chart-wrapper">
                <canvas id="carChart"></canvas>
            </div>
            
            <!-- 数据输入面板 -->
            <div class="data-input-panel">
                <h5>📝 自定义数据输入</h5>
                <div class="control-group">
                    <label>速度数据 (逗号分隔，km/h):</label>
                    <input type="text" id="carSpeedData" value="10,20,30,40,50,60,70,80,90,100">
                </div>
                <div class="control-group">
                    <label>制动距离数据 (逗号分隔，m):</label>
                    <input type="text" id="carDistanceData" value="0.5,2.0,4.4,7.9,12.3,17.7,24.1,31.5,39.9,49.2">
                </div>
                <div class="button-group">
                    <button class="btn-teaching" onclick="updateCarChart()">应用自定义数据</button>
                    <button class="btn-teaching" onclick="generateRandomCar()">生成随机数据</button>
                    <button class="btn-teaching" onclick="resetCar()">重置数据</button>
                </div>
            </div>
            
            <div class="code-section">
                <h5>Python 源码:</h5>
                <pre>
x_speed = np.arange(10, 110, 10)
y_distance = [0.5,2.0,4.4,7.9,12.3,17.7,24.1,31.5,39.9,49.2]
plt.scatter(x_speed, y_distance, s=50, alpha=0.9)
plt.xlabel('速度(km/h)')
plt.ylabel('制动距离(m)')
plt.grid(True)
plt.show()</pre>
            </div>
        </div>

        <!-- 英语成绩模型 -->
        <div class="model-section">
            <h3>📚 模型5: 英语平均成绩对比</h3>
            <div class="chart-wrapper">
                <canvas id="englishChart"></canvas>
            </div>
            
            <!-- 数据输入面板 -->
            <div class="data-input-panel">
                <h5>📝 自定义数据输入</h5>
                <div class="input-row">
                    <div class="control-group">
                        <label>男生成绩 (逗号分隔):</label>
                        <input type="text" id="maleScores" value="90.5,89.5,88.7,88.5,85.2,86.6">
                    </div>
                    <div class="control-group">
                        <label>女生成绩 (逗号分隔):</label>
                        <input type="text" id="femaleScores" value="92.7,87.0,90.5,85.0,89.5,89.8">
                    </div>
                </div>
                <div class="control-group">
                    <label>班级名称 (逗号分隔):</label>
                    <input type="text" id="classLabels" value="高二1班,高二2班,高二3班,高二4班,高二5班,高二6班">
                </div>
                <div class="button-group">
                    <button class="btn-teaching" onclick="updateEnglishChart()">应用自定义数据</button>
                    <button class="btn-teaching" onclick="generateRandomEnglish()">生成随机数据</button>
                    <button class="btn-teaching" onclick="resetEnglish()">重置数据</button>
                </div>
            </div>
            
            <div class="code-section">
                <h5>Python 源码:</h5>
                <pre>
men_means = (90.5, 89.5, 88.7, 88.5, 85.2, 86.6)
women_means = (92.7, 87.0, 90.5, 85.0, 89.5, 89.8)
ind = np.arange(len(men_means))
width = 0.35
plt.bar(ind - width/2, men_means, width, label='男生平均成绩')
plt.bar(ind + width/2, women_means, width, label='女生平均成绩')
plt.title('高二各班男生、女生英语平均成绩')
plt.ylabel('分数')
plt.xticks(ind, ['高二1班','高二2班','高二3班','高二4班','高二5班','高二6班'])
plt.axhline(88.5, ls='--', label='全体平均成绩')
plt.legend()
plt.show()</pre>
            </div>
        </div>

        <!-- 阿里巴巴GMV模型 -->
        <div class="model-section">
            <h3>📊 模型6: 阿里巴巴GMV数据</h3>
            <div class="chart-wrapper">
                <canvas id="gmvChart"></canvas>
            </div>
            
            <!-- 数据输入面板 -->
            <div class="data-input-panel">
                <h5>📝 自定义数据输入</h5>
                <div class="control-group">
                    <label>GMV数据 (逗号分隔，单位:亿元):</label>
                    <input type="text" id="gmvData" value="10770,16780,24440,30920,37670,48200,57270">
                </div>
                <div class="control-group">
                    <label>年份标签 (逗号分隔):</label>
                    <input type="text" id="gmvLabels" value="FY2013,FY2014,FY2015,FY2016,FY2017,FY2018,FY2019">
                </div>
                <div class="button-group">
                    <button class="btn-teaching" onclick="updateGmvChart()">应用自定义数据</button>
                    <button class="btn-teaching" onclick="generateRandomGmv()">生成随机数据</button>
                    <button class="btn-teaching" onclick="resetGmv()">重置数据</button>
                </div>
            </div>
            
            <div class="code-section">
                <h5>Python 源码:</h5>
                <pre>
x = np.arange(1,8)
y = [10770, 16780, 24440, 30920, 37670, 48200, 57270]
bar_rects = plt.bar(x, y, tick_label=["FY2013","FY2014","FY2015","FY2016",
                     "FY2017","FY2018","FY2019"], width=0.5)
plt.ylabel('GMV（亿元)')
# 添加数据标签
for rect in bar_rects:
    height = rect.get_height()
    plt.text(rect.get_x() + rect.get_width()/2, height + 300, 
             f'{height}', ha='center', va='bottom')
plt.show()</pre>
            </div>
        </div>

        <!-- 果酱面包配料模型 -->
        <div class="model-section">
            <h3>🍞 模型7: 果酱面包配料比例</h3>
            <div class="chart-wrapper">
                <canvas id="breadChart"></canvas>
            </div>
            
            <!-- 配料表格 -->
            <div class="data-input-panel">
                <h5>📋 配料表格</h5>
                <table class="ingredient-table" id="breadTable">
                    <thead>
                        <tr>
                            <th>配料名称</th>
                            <th>重量(g)</th>
                            <th>比例(%)</th>
                        </tr>
                    </thead>
                    <tbody id="breadTableBody">
                        <!-- 表格内容将通过JavaScript动态生成 -->
                    </tbody>
                </table>
            </div>
            
            <!-- 数据输入面板 -->
            <div class="data-input-panel">
                <h5>📝 自定义配料数据</h5>
                <div class="control-group">
                    <label>配料名称 (逗号分隔):</label>
                    <input type="text" id="breadLabels" value="面粉,全麦粉,酵母,苹果酱,鸡蛋,黄油,盐,白糖">
                </div>
                <div class="control-group">
                    <label>配料重量 (逗号分隔，单位:g):</label>
                    <input type="text" id="breadWeights" value="250,150,4,250,50,30,4,20">
                </div>
                <div class="button-group">
                    <button class="btn-teaching" onclick="updateBreadChart()">应用自定义数据</button>
                    <button class="btn-teaching" onclick="generateRandomBread()">生成随机数据</button>
                    <button class="btn-teaching" onclick="resetBread()">重置数据</button>
                </div>
            </div>
            
            <div class="code-section">
                <h5>Python 源码:</h5>
                <pre>
import matplotlib.pyplot as plt
plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False
kinds = ['面粉', '全麦粉', '酵母', '苹果酱', '鸡蛋', '黄油', '盐', '白糖']
weight = [250, 150, 4, 250, 50, 30, 4, 20]
total_weight = 0
for i in weight:
    total_weight += i
batching_scale = [i / total_weight for i in weight]
plt.pie(batching_scale, autopct='%3.1f%%')
plt.legend(kinds, loc='upper right', bbox_to_anchor=[1.1, 1.1])  
# 添加表格
plt.table(cellText=[weight], cellLoc='center', rowLabels=['重量(g)'], 
          colLabels=kinds, loc='lower center')
plt.show()</pre>
            </div>
        </div>
    </div>

    <script>
        // 图表实例存储
        const teachingCharts = {};

        // 初始化所有图表
        document.addEventListener('DOMContentLoaded', function() {
            initTeachingCharts();
        });

        // ========== 正弦余弦曲线 ==========
        function initSineCosineChart() {
            const ctx = document.getElementById('sineCosineChart').getContext('2d');
            
            teachingCharts.sineCosine = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月'],
                    datasets: [
                        {
                            label: '正弦',
                            data: [65, 59, 80, 81, 56, 55, 40, 75],
                            borderColor: 'rgb(75, 192, 192)',
                            backgroundColor: 'rgba(75, 192, 192, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: '余弦',
                            data: [28, 48, 40, 19, 86, 27, 90, 60],
                            borderColor: 'rgb(255, 99, 132)',
                            backgroundColor: 'rgba(255, 99, 132, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '正弦曲线和余弦曲线',
                            color: 'white',
                            font: { size: 16 }
                        },
                        legend: {
                            labels: { color: 'white' }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'x轴',
                                color: 'white'
                            },
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'y轴',
                                color: 'white'
                            },
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    }
                }
            });
        }

        function updateSineCosineChart() {
            try {
                const sineData = document.getElementById('sineData').value.split(',').map(val => parseFloat(val.trim()));
                const cosineData = document.getElementById('cosineData').value.split(',').map(val => parseFloat(val.trim()));
                const labels = document.getElementById('sineLabels').value.split(',').map(label => label.trim());
                
                teachingCharts.sineCosine.data.labels = labels;
                teachingCharts.sineCosine.data.datasets[0].data = sineData;
                teachingCharts.sineCosine.data.datasets[1].data = cosineData;
                teachingCharts.sineCosine.update();
            } catch (error) {
                alert('数据格式错误！请确保输入的是用逗号分隔的数字。');
            }
        }

        function generateRandomSineCosine() {
            const length = 8;
            const sineData = Array.from({length}, () => Math.floor(Math.random() * 100));
            const cosineData = Array.from({length}, () => Math.floor(Math.random() * 100));
            const labels = Array.from({length}, (_, i) => `数据${i+1}`);
            
            document.getElementById('sineData').value = sineData.join(',');
            document.getElementById('cosineData').value = cosineData.join(',');
            document.getElementById('sineLabels').value = labels.join(',');
            
            updateSineCosineChart();
        }

        function resetSineCosine() {
            document.getElementById('sineData').value = "65,59,80,81,56,55,40,75";
            document.getElementById('cosineData').value = "28,48,40,19,86,27,90,60";
            document.getElementById('sineLabels').value = "1月,2月,3月,4月,5月,6月,7月,8月";
            updateSineCosineChart();
        }

        // ========== 支付宝月账单 ==========
        function initAlipayChart() {
            const ctx = document.getElementById('alipayChart').getContext('2d');
            
            teachingCharts.alipay = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['购物', '人情往来', '餐饮美食', '通信物流', '生活日用', '交通出行', '休闲娱乐', '其他'],
                    datasets: [{
                        data: [26.7, 3.3, 33.3, 6.7, 10.0, 4.7, 8.7, 6.7],
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0',
                            '#9966FF', '#FF9F40', '#FF6384', '#C9CBCF'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '支付宝月账单报告',
                            color: 'white',
                            font: { size: 16 }
                        },
                        legend: {
                            position: 'right',
                            labels: { color: 'white' }
                        }
                    }
                }
            });
        }

        function updateAlipayChart() {
            const shopping = parseFloat(document.getElementById('alipayShopping').value) || 0;
            const food = parseFloat(document.getElementById('alipayFood').value) || 0;
            const transport = parseFloat(document.getElementById('alipayTransport').value) || 0;
            const entertainment = parseFloat(document.getElementById('alipayEntertainment').value) || 0;
            
            // 计算其他类别
            const remaining = 100 - shopping - food - transport - entertainment;
            const otherCategories = [3.3, 6.7, 4.7, remaining/2, remaining/2];
            
            const newData = [shopping, ...otherCategories.slice(0, 1), food, ...otherCategories.slice(1, 2), 
                           transport, ...otherCategories.slice(2, 3), entertainment, ...otherCategories.slice(3)];
            
            teachingCharts.alipay.data.datasets[0].data = newData;
            teachingCharts.alipay.update();
        }

        function generateRandomAlipay() {
            document.getElementById('alipayShopping').value = (Math.random() * 40 + 20).toFixed(1);
            document.getElementById('alipayFood').value = (Math.random() * 40 + 20).toFixed(1);
            document.getElementById('alipayTransport').value = (Math.random() * 20 + 5).toFixed(1);
            document.getElementById('alipayEntertainment').value = (Math.random() * 15 + 5).toFixed(1);
            updateAlipayChart();
        }

        function resetAlipay() {
            document.getElementById('alipayShopping').value = "26.7";
            document.getElementById('alipayFood').value = "33.3";
            document.getElementById('alipayTransport').value = "10.0";
            document.getElementById('alipayEntertainment').value = "8.7";
            updateAlipayChart();
        }

        // ========== 电影票房 ==========
        function initMovieChart() {
            const ctx = document.getElementById('movieChart').getContext('2d');
            
            teachingCharts.movie = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ["哪吒之魔童降世", "流浪地球", "复仇者联盟4:终局之战", 
                            "疯狂的外星人", "飞驰人生", "烈火英雄", "蜘蛛侠:英雄远征", 
                            "速度与激情:特别行动", "扫毒2天地对决", "大黄蜂", "惊奇队长", 
                            "比悲伤更悲伤的故事", "哥斯拉2:怪兽之王", "阿丽塔:战斗天使", 
                            "银河补习班"],
                    datasets: [{
                        label: '票房（亿元）',
                        data: [48.57, 46.18, 42.05, 21.83, 17.03, 16.70, 14.01, 13.84, 
                               12.85, 11.38, 10.25, 9.46, 9.27, 8.88, 8.64],
                        backgroundColor: 'rgba(255, 159, 64, 0.8)',
                        borderColor: 'rgb(255, 159, 64)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '电影票房排名',
                            color: 'white',
                            font: { size: 16 }
                        },
                        legend: {
                            labels: { color: 'white' }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `票房: ${context.parsed.x} 亿元`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '总票房（亿元）',
                                color: 'white'
                            },
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        y: {
                            ticks: { 
                                color: 'white',
                                font: {
                                    size: 11 // 调整字体大小以适应长电影名
                                }
                            },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    }
                }
            });
        }

        function updateMovieChart() {
            try {
                const data = document.getElementById('movieData').value.split(',').map(val => parseFloat(val.trim()));
                const labels = document.getElementById('movieLabels').value.split(',').map(label => label.trim());
                
                teachingCharts.movie.data.labels = labels;
                teachingCharts.movie.data.datasets[0].data = data;
                teachingCharts.movie.update();
            } catch (error) {
                alert('数据格式错误！请确保输入的是用逗号分隔的数字。');
            }
        }

        function generateRandomMovie() {
            const length = 15;
            const data = Array.from({length}, () => (Math.random() * 50 + 5).toFixed(2));
            const labels = Array.from({length}, (_, i) => `电影${i+1}`);
            
            document.getElementById('movieData').value = data.join(',');
            document.getElementById('movieLabels').value = labels.join(',');
            updateMovieChart();
        }

        function resetMovie() {
            document.getElementById('movieData').value = "48.57,46.18,42.05,21.83,17.03,16.70,14.01,13.84,12.85,11.38,10.25,9.46,9.27,8.88,8.64";
            document.getElementById('movieLabels').value = "哪吒之魔童降世,流浪地球,复仇者联盟4:终局之战,疯狂的外星人,飞驰人生,烈火英雄,蜘蛛侠:英雄远征,速度与激情:特别行动,扫毒2天地对决,大黄蜂,惊奇队长,比悲伤更悲伤的故事,哥斯拉2:怪兽之王,阿丽塔:战斗天使,银河补习班";
            updateMovieChart();
        }

        // ========== 汽车制动距离 ==========
        function initCarChart() {
            const ctx = document.getElementById('carChart').getContext('2d');
            
            teachingCharts.car = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: '制动距离',
                        data: [
                            {x: 10, y: 0.5}, {x: 20, y: 2.0}, {x: 30, y: 4.4}, {x: 40, y: 7.9},
                            {x: 50, y: 12.3}, {x: 60, y: 17.7}, {x: 70, y: 24.1}, {x: 80, y: 31.5},
                            {x: 90, y: 39.9}, {x: 100, y: 49.2}
                        ],
                        backgroundColor: 'rgba(54, 162, 235, 0.8)',
                        borderColor: 'rgb(54, 162, 235)',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '汽车速度与制动距离的关系',
                            color: 'white',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '速度(km/h)',
                                color: 'white'
                            },
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '制动距离(m)',
                                color: 'white'
                            },
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    }
                }
            });
        }

        function updateCarChart() {
            try {
                const speedData = document.getElementById('carSpeedData').value.split(',').map(val => parseFloat(val.trim()));
                const distanceData = document.getElementById('carDistanceData').value.split(',').map(val => parseFloat(val.trim()));
                
                const newData = speedData.map((speed, index) => ({
                    x: speed,
                    y: distanceData[index] || 0
                }));
                
                teachingCharts.car.data.datasets[0].data = newData;
                teachingCharts.car.update();
            } catch (error) {
                alert('数据格式错误！请确保输入的是用逗号分隔的数字，且两组数据长度相同。');
            }
        }

        function generateRandomCar() {
            const length = 10;
            const speedData = Array.from({length}, (_, i) => (i + 1) * 10);
            const distanceData = Array.from({length}, () => (Math.random() * 50).toFixed(1));
            
            document.getElementById('carSpeedData').value = speedData.join(',');
            document.getElementById('carDistanceData').value = distanceData.join(',');
            updateCarChart();
        }

        function resetCar() {
            document.getElementById('carSpeedData').value = "10,20,30,40,50,60,70,80,90,100";
            document.getElementById('carDistanceData').value = "0.5,2.0,4.4,7.9,12.3,17.7,24.1,31.5,39.9,49.2";
            updateCarChart();
        }

        // ========== 英语成绩 ==========
        function initEnglishChart() {
            const ctx = document.getElementById('englishChart').getContext('2d');
            
            teachingCharts.english = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['高二1班', '高二2班', '高二3班', '高二4班', '高二5班', '高二6班'],
                    datasets: [
                        {
                            label: '男生平均成绩',
                            data: [90.5, 89.5, 88.7, 88.5, 85.2, 86.6],
                            backgroundColor: 'rgba(54, 162, 235, 0.8)',
                            borderColor: 'rgb(54, 162, 235)',
                            borderWidth: 1
                        },
                        {
                            label: '女生平均成绩',
                            data: [92.7, 87.0, 90.5, 85.0, 89.5, 89.8],
                            backgroundColor: 'rgba(255, 99, 132, 0.8)',
                            borderColor: 'rgb(255, 99, 132)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '高二各班男生、女生英语平均成绩',
                            color: 'white',
                            font: { size: 16 }
                        },
                        legend: {
                            labels: { color: 'white' }
                        }
                    },
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: '分数',
                                color: 'white'
                            },
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            min: 80,
                            max: 95
                        },
                        x: {
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    }
                }
            });
        }

        function updateEnglishChart() {
            try {
                const maleScores = document.getElementById('maleScores').value.split(',').map(val => parseFloat(val.trim()));
                const femaleScores = document.getElementById('femaleScores').value.split(',').map(val => parseFloat(val.trim()));
                const labels = document.getElementById('classLabels').value.split(',').map(label => label.trim());
                
                teachingCharts.english.data.labels = labels;
                teachingCharts.english.data.datasets[0].data = maleScores;
                teachingCharts.english.data.datasets[1].data = femaleScores;
                teachingCharts.english.update();
            } catch (error) {
                alert('数据格式错误！请确保输入的是用逗号分隔的数字。');
            }
        }

        function generateRandomEnglish() {
            const length = 6;
            const maleScores = Array.from({length}, () => (Math.random() * 15 + 80).toFixed(1));
            const femaleScores = Array.from({length}, () => (Math.random() * 15 + 80).toFixed(1));
            const labels = Array.from({length}, (_, i) => `班级${i+1}`);
            
            document.getElementById('maleScores').value = maleScores.join(',');
            document.getElementById('femaleScores').value = femaleScores.join(',');
            document.getElementById('classLabels').value = labels.join(',');
            updateEnglishChart();
        }

        function resetEnglish() {
            document.getElementById('maleScores').value = "90.5,89.5,88.7,88.5,85.2,86.6";
            document.getElementById('femaleScores').value = "92.7,87.0,90.5,85.0,89.5,89.8";
            document.getElementById('classLabels').value = "高二1班,高二2班,高二3班,高二4班,高二5班,高二6班";
            updateEnglishChart();
        }

        // ========== 阿里巴巴GMV ==========
        function initGmvChart() {
            const ctx = document.getElementById('gmvChart').getContext('2d');
            
            teachingCharts.gmv = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ["FY2013", "FY2014", "FY2015", "FY2016", "FY2017", "FY2018", "FY2019"],
                    datasets: [{
                        label: 'GMV（亿元）',
                        data: [10770, 16780, 24440, 30920, 37670, 48200, 57270],
                        backgroundColor: 'rgba(75, 192, 192, 0.8)',
                        borderColor: 'rgb(75, 192, 192)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '2013-2019财年阿里巴巴淘宝和天猫平台的GMV',
                            color: 'white',
                            font: { size: 16 }
                        },
                        legend: {
                            labels: { color: 'white' }
                        }
                    },
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: 'GMV（亿元)',
                                color: 'white'
                            },
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        x: {
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    }
                }
            });
        }

        function updateGmvChart() {
            try {
                const data = document.getElementById('gmvData').value.split(',').map(val => parseFloat(val.trim()));
                const labels = document.getElementById('gmvLabels').value.split(',').map(label => label.trim());
                
                teachingCharts.gmv.data.labels = labels;
                teachingCharts.gmv.data.datasets[0].data = data;
                teachingCharts.gmv.update();
            } catch (error) {
                alert('数据格式错误！请确保输入的是用逗号分隔的数字。');
            }
        }

        function generateRandomGmv() {
            const length = 7;
            const data = Array.from({length}, (_, i) => Math.floor(Math.random() * 50000 + 10000));
            const labels = Array.from({length}, (_, i) => `年份${i+1}`);
            
            document.getElementById('gmvData').value = data.join(',');
            document.getElementById('gmvLabels').value = labels.join(',');
            updateGmvChart();
        }

        function resetGmv() {
            document.getElementById('gmvData').value = "10770,16780,24440,30920,37670,48200,57270";
            document.getElementById('gmvLabels').value = "FY2013,FY2014,FY2015,FY2016,FY2017,FY2018,FY2019";
            updateGmvChart();
        }

        // ========== 果酱面包配料模型 ==========
        function initBreadChart() {
            const ctx = document.getElementById('breadChart').getContext('2d');
            
            teachingCharts.bread = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['面粉', '全麦粉', '酵母', '苹果酱', '鸡蛋', '黄油', '盐', '白糖'],
                    datasets: [{
                        data: [250, 150, 4, 250, 50, 30, 4, 20],
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0',
                            '#9966FF', '#FF9F40', '#8AC926', '#1982C4'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '果酱面包配料比例',
                            color: 'white',
                            font: { size: 16 }
                        },
                        legend: {
                            position: 'right',
                            labels: { color: 'white' }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${label}: ${value}g (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
            
            updateBreadTable();
        }

        function updateBreadChart() {
            try {
                const labels = document.getElementById('breadLabels').value.split(',').map(label => label.trim());
                const weights = document.getElementById('breadWeights').value.split(',').map(val => parseFloat(val.trim()));
                
                teachingCharts.bread.data.labels = labels;
                teachingCharts.bread.data.datasets[0].data = weights;
                teachingCharts.bread.update();
                
                updateBreadTable();
            } catch (error) {
                alert('数据格式错误！请确保输入的是用逗号分隔的数字。');
            }
        }

        function updateBreadTable() {
            const tableBody = document.getElementById('breadTableBody');
            const labels = teachingCharts.bread.data.labels;
            const weights = teachingCharts.bread.data.datasets[0].data;
            const totalWeight = weights.reduce((sum, weight) => sum + weight, 0);
            
            tableBody.innerHTML = '';
            
            labels.forEach((label, index) => {
                const weight = weights[index];
                const percentage = ((weight / totalWeight) * 100).toFixed(1);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${label}</td>
                    <td>${weight}g</td>
                    <td>${percentage}%</td>
                `;
                tableBody.appendChild(row);
            });
        }

        function generateRandomBread() {
            const length = 8;
            const weights = Array.from({length}, () => Math.floor(Math.random() * 200 + 10));
            const labels = Array.from({length}, (_, i) => `配料${i+1}`);
            
            document.getElementById('breadLabels').value = labels.join(',');
            document.getElementById('breadWeights').value = weights.join(',');
            updateBreadChart();
        }

        function resetBread() {
            document.getElementById('breadLabels').value = "面粉,全麦粉,酵母,苹果酱,鸡蛋,黄油,盐,白糖";
            document.getElementById('breadWeights').value = "250,150,4,250,50,30,4,20";
            updateBreadChart();
        }

        // ========== 初始化所有图表 ==========
        function initTeachingCharts() {
            initSineCosineChart();
            initAlipayChart();
            initMovieChart();
            initCarChart();
            initEnglishChart();
            initGmvChart();
            initBreadChart();
        }

        // ========== 全局功能 ==========
        function resetAllTeachingModels() {
            resetSineCosine();
            resetAlipay();
            resetMovie();
            resetCar();
            resetEnglish();
            resetGmv();
            resetBread();
            alert('所有教学模型已重置！');
        }

        function generateRandomForAll() {
            generateRandomSineCosine();
            generateRandomAlipay();
            generateRandomMovie();
            generateRandomCar();
            generateRandomEnglish();
            generateRandomGmv();
            generateRandomBread();
            alert('已为所有模型生成随机数据！');
        }
    </script>
</body>
</html>
