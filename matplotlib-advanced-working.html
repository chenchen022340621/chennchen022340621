<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matplotlib é«˜çº§å›¾è¡¨ - ChenChen æ•°æ®å¯è§†åŒ–å¹³å°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #1a2a6c;
            --secondary-color: #b21f1f;
            --accent-color: #fdbb2d;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            color: white;
            min-height: 100vh;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
        }
        
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 20px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .chapter-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }
        
        .example-item {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .example-item:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.12);
        }
        
        .graph-wrapper {
            height: 400px;
            position: relative;
            margin: 15px 0;
        }
        
        .graph-wrapper canvas {
            max-width: 100%;
            max-height: 100%;
            border-radius: 10px;
            background: white;
        }
        
        .example-title {
            text-align: center;
            margin-bottom: 15px;
            font-weight: 600;
            color: white;
            font-size: 1.3em;
        }
        
        .btn-custom {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-custom:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            color: white;
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .description {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 0.95em;
        }
        
        @media (max-width: 768px) {
            .example-grid {
                grid-template-columns: 1fr;
            }
            
            .graph-wrapper {
                height: 300px;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>ğŸ—ºï¸ Matplotlib é«˜çº§å›¾è¡¨</h1>
            <p class="lead">ç¬¬8ç« ï¼šä¸“ä¸šç§‘å­¦å¯è§†åŒ–å›¾è¡¨</p>
            <div class="button-group">
                <a href="index.html" class="btn-custom">ğŸ  è¿”å›ä¸»é¡µé¢</a>
                <button class="btn-custom" onclick="refreshAllCharts()">ğŸ”„ åˆ·æ–°æ‰€æœ‰å›¾è¡¨</button>
            </div>
        </div>

        <div class="chapter-container">
            <h3 class="text-center mb-4">ğŸ¯ ç¬¬8ç« é«˜çº§å›¾è¡¨å®ä¾‹å±•ç¤º</h3>
            
            <div class="example-grid">
                <!-- å®ä¾‹1ï¼šä¸“ä¸šç­‰é«˜çº¿å›¾ -->
                <div class="example-item">
                    <h5 class="example-title">å®ä¾‹1ï¼šåœ°å½¢ç­‰é«˜çº¿å›¾</h5>
                    <div class="graph-wrapper">
                        <canvas id="contourChart"></canvas>
                    </div>
                    <div class="description">
                        <p><strong>æè¿°ï¼š</strong>ä¸‰ç»´åœ°å½¢æ•°æ®çš„ç­‰é«˜çº¿è¡¨ç¤ºï¼Œæ¨¡æ‹ŸçœŸå®å±±åœ°åœ°å½¢</p>
                        <p><strong>ç‰¹ç‚¹ï¼š</strong>ç­‰å€¼çº¿ã€åœ°å½¢è½®å»“ã€ä¸“ä¸šåœ°ç†å¯è§†åŒ–</p>
                    </div>
                </div>

                <!-- å®ä¾‹2ï¼šæ£‰æ£’å›¾ -->
                <div class="example-item">
                    <h5 class="example-title">å®ä¾‹2ï¼šæ£‰æ£’å›¾ï¼ˆæ±½è½¦ç‡ƒæ–™æ¶ˆè€—ï¼‰</h5>
                    <div class="graph-wrapper">
                        <canvas id="stemChart"></canvas>
                    </div>
                    <div class="description">
                        <p><strong>æè¿°ï¼š</strong>ä¸åŒå“ç‰Œè½¿è½¦ç‡ƒæ–™æ¶ˆè€—é‡çš„ç¦»æ•£æ•°æ®å¯¹æ¯”</p>
                        <p><strong>ç‰¹ç‚¹ï¼š</strong>å¸¦æ ‡è®°çš„å‚ç›´çº¿ã€æ•°æ®ç‚¹å¯¹æ¯”</p>
                    </div>
                </div>

                <!-- å®ä¾‹3ï¼šå“‘é“ƒå›¾ -->
                <div class="example-item">
                    <h5 class="example-title">å®ä¾‹3ï¼šå“‘é“ƒå›¾ï¼ˆæ•°æ®å˜åŒ–å¯¹æ¯”ï¼‰</h5>
                    <div class="graph-wrapper">
                        <canvas id="dumbbellChart"></canvas>
                    </div>
                    <div class="description">
                        <p><strong>æè¿°ï¼š</strong>å±•ç¤ºä¸¤ç»„æ•°æ®ä¹‹é—´çš„å˜åŒ–å’Œå·®å¼‚å¯¹æ¯”</p>
                        <p><strong>ç‰¹ç‚¹ï¼š</strong>è¿æ¥çº¿å¯¹æ¯”ã€å˜åŒ–å¹…åº¦</p>
                    </div>
                </div>

                <!-- å®ä¾‹4ï¼šç”˜ç‰¹å›¾ -->
                <div class="example-item">
                    <h5 class="example-title">å®ä¾‹4ï¼šä»»åŠ¡ç”˜ç‰¹å›¾</h5>
                    <div class="graph-wrapper">
                        <canvas id="ganttChart"></canvas>
                    </div>
                    <div class="description">
                        <p><strong>æè¿°ï¼š</strong>é¡¹ç›®ç®¡ç†ä¸­çš„ä»»åŠ¡æ—¶é—´å®‰æ’å’Œè¿›åº¦å¯è§†åŒ–</p>
                        <p><strong>ç‰¹ç‚¹ï¼š</strong>æ—¶é—´çº¿ã€ä»»åŠ¡æŒç»­æ—¶é—´</p>
                    </div>
                </div>

                <!-- å®ä¾‹5ï¼šäººå£é‡‘å­—å¡” -->
                <div class="example-item">
                    <h5 class="example-title">å®ä¾‹5ï¼šäººå£é‡‘å­—å¡”å›¾</h5>
                    <div class="graph-wrapper">
                        <canvas id="pyramidChart"></canvas>
                    </div>
                    <div class="description">
                        <p><strong>æè¿°ï¼š</strong>å±•ç¤ºä¸åŒå¹´é¾„æ®µç”·å¥³äººå£æ•°é‡çš„å¯¹ç§°åˆ†å¸ƒ</p>
                        <p><strong>ç‰¹ç‚¹ï¼š</strong>å¹´é¾„ç»“æ„ã€æ€§åˆ«å¯¹æ¯”</p>
                    </div>
                </div>

                <!-- å®ä¾‹6ï¼šæ¼æ–—å›¾ -->
                <div class="example-item">
                    <h5 class="example-title">å®ä¾‹6ï¼šé”€å”®æ¼æ–—å›¾</h5>
                    <div class="graph-wrapper">
                        <canvas id="funnelChart"></canvas>
                    </div>
                    <div class="description">
                        <p><strong>æè¿°ï¼š</strong>å®¢æˆ·è½¬åŒ–æµç¨‹ä¸­å„ç¯èŠ‚çš„æ•°é‡å’Œè½¬åŒ–ç‡</p>
                        <p><strong>ç‰¹ç‚¹ï¼š</strong>è½¬åŒ–æµç¨‹ã€å„ç¯èŠ‚å¯¹æ¯”</p>
                    </div>
                </div>

                <!-- å®ä¾‹7ï¼šé›·è¾¾å›¾ï¼ˆæ›¿ä»£æ ‘çŠ¶å›¾ï¼‰ -->
                <div class="example-item">
                    <h5 class="example-title">å®ä¾‹7ï¼šé›·è¾¾å›¾ï¼ˆèšç±»åˆ†æï¼‰</h5>
                    <div class="graph-wrapper">
                        <canvas id="radarChart"></canvas>
                    </div>
                    <div class="description">
                        <p><strong>æè¿°ï¼š</strong>å±•ç¤ºå¤šç»´åº¦æ•°æ®çš„èšç±»åˆ†æç»“æœ</p>
                        <p><strong>ç‰¹ç‚¹ï¼š</strong>å¤šç»´åº¦å¯¹æ¯”ã€èšç±»å¯è§†åŒ–</p>
                    </div>
                </div>

                <!-- å®ä¾‹8ï¼šçƒ­åŠ›å›¾ï¼ˆæ›¿ä»£ç­‰é«˜çº¿å›¾ï¼‰ -->
                <div class="example-item">
                    <h5 class="example-title">å®ä¾‹8ï¼šçƒ­åŠ›å›¾ï¼ˆåœ°å½¢é«˜åº¦ï¼‰</h5>
                    <div class="graph-wrapper">
                        <canvas id="heatmapChart"></canvas>
                    </div>
                    <div class="description">
                        <p><strong>æè¿°ï¼š</strong>åœ°å½¢é«˜åº¦çš„çƒ­åŠ›å›¾è¡¨ç¤ºï¼Œé¢œè‰²è¡¨ç¤ºé«˜åº¦</p>
                        <p><strong>ç‰¹ç‚¹ï¼š</strong>é¢œè‰²æ¸å˜ã€é«˜åº¦å¯è§†åŒ–</p>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <a href="index.html" class="btn-custom">ğŸ  è¿”å›ä¸»é¡µé¢</a>
                <a href="matplotlib-examples.html" class="btn-custom">ğŸ“Š åŸºç¡€å›¾å½¢</a>
                <a href="matplotlib-subplots.html" class="btn-custom">ğŸ“ å­å›¾å¸ƒå±€</a>
                <a href="matplotlib-3d-real.html" class="btn-custom">ğŸŒŒ 3Då›¾å½¢</a>
                <button class="btn-custom" onclick="refreshAllCharts()">ğŸ”„ åˆ·æ–°å›¾è¡¨</button>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
        function initializeAllCharts() {
            // å®ä¾‹1ï¼šç­‰é«˜çº¿å›¾ï¼ˆç”¨æŠ˜çº¿å›¾æ¨¡æ‹Ÿï¼‰
            createContourChart();
            
            // å®ä¾‹2ï¼šæ£‰æ£’å›¾
            createStemChart();
            
            // å®ä¾‹3ï¼šå“‘é“ƒå›¾
            createDumbbellChart();
            
            // å®ä¾‹4ï¼šç”˜ç‰¹å›¾
            createGanttChart();
            
            // å®ä¾‹5ï¼šäººå£é‡‘å­—å¡”
            createPyramidChart();
            
            // å®ä¾‹6ï¼šæ¼æ–—å›¾
            createFunnelChart();
            
            // å®ä¾‹7ï¼šé›·è¾¾å›¾
            createRadarChart();
            
            // å®ä¾‹8ï¼šçƒ­åŠ›å›¾ï¼ˆç”¨æ•£ç‚¹å›¾æ¨¡æ‹Ÿï¼‰
            createHeatmapChart();
        }
        
        // 1. åˆ›å»ºç­‰é«˜çº¿å›¾ï¼ˆç”¨æŠ˜çº¿å›¾æ¨¡æ‹Ÿå¤šæ¡ç­‰é«˜çº¿ï¼‰
        function createContourChart() {
            const ctx = document.getElementById('contourChart').getContext('2d');
            
            // ç”Ÿæˆå¤šç»„ç­‰é«˜çº¿æ•°æ®
            const datasets = [];
            const colors = ['#8B4513', '#A0522D', '#CD853F', '#D2691E', '#8B4513'];
            
            // åˆ›å»º5æ¡ä¸åŒé«˜åº¦çš„ç­‰é«˜çº¿
            for (let level = 0; level < 5; level++) {
                const data = [];
                const height = -1 + level * 0.5; // ä»-1åˆ°1çš„é«˜åº¦
                
                // ç”Ÿæˆæ­£å¼¦æ³¢å½¢æ•°æ®æ¨¡æ‹Ÿç­‰é«˜çº¿
                for (let x = -3; x <= 3; x += 0.1) {
                    // åœ°å½¢å‡½æ•°ï¼šz = sin(sqrt(xÂ² + yÂ²))
                    const y = Math.sqrt(Math.max(0, 1 - x*x)) * Math.sin(height * 2);
                    data.push({x: x, y: y + level * 0.2});
                }
                
                datasets.push({
                    label: `é«˜åº¦ ${height.toFixed(1)}`,
                    data: data,
                    borderColor: colors[level],
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    fill: false,
                    tension: 0.3,
                    pointRadius: 0
                });
            }
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'åœ°å½¢ç­‰é«˜çº¿å›¾',
                            font: { size: 16, weight: 'bold', color: 'black' }
                        },
                        legend: {
                            labels: { color: 'black' }
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'Xåæ ‡',
                                color: 'black'
                            },
                            ticks: { color: 'black' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Yåæ ‡',
                                color: 'black'
                            },
                            ticks: { color: 'black' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        }
                    }
                }
            });
        }
        
        // 2. åˆ›å»ºæ£‰æ£’å›¾
        function createStemChart() {
            const ctx = document.getElementById('stemChart').getContext('2d');
            
            const carBrands = ['å®éª310', 'å®é©¬i3', 'è‡´äº«', 'ç„•é©°', 'åŠ›å¸†530'];
            const fuelConsumption = [5.9, 6.2, 6.7, 7.0, 7.0];
            
            // åˆ›å»ºæ£‰æ£’æ•ˆæœï¼šå‚ç›´çº¿+æ•°æ®ç‚¹
            const datasets = [];
            
            // æ·»åŠ å‚ç›´çº¿
            const stemLines = [];
            fuelConsumption.forEach((value, index) => {
                stemLines.push({x: index, y: 0});
                stemLines.push({x: index, y: value});
                stemLines.push({x: index, y: NaN}); // æ–­å¼€è¿æ¥
            });
            
            datasets.push({
                label: 'å‚ç›´çº¿',
                data: stemLines,
                borderColor: 'rgba(0, 0, 0, 0.5)',
                backgroundColor: 'transparent',
                borderWidth: 2,
                pointRadius: 0,
                showLine: true,
                tension: 0
            });
            
            // æ·»åŠ æ•°æ®ç‚¹
            datasets.push({
                label: 'ç‡ƒæ–™æ¶ˆè€—é‡(L/km)',
                data: fuelConsumption.map((value, index) => ({x: index, y: value})),
                backgroundColor: 'rgba(54, 162, 235, 0.8)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 2,
                pointRadius: 8,
                pointStyle: 'circle',
                showLine: false
            });
            
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    labels: carBrands,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'ä¸åŒå“ç‰Œè½¿è½¦ç‡ƒæ–™æ¶ˆè€—é‡ - æ£‰æ£’å›¾',
                            font: { size: 16, weight: 'bold', color: 'black' }
                        },
                        legend: {
                            labels: { color: 'black' }
                        }
                    },
                    scales: {
                        x: {
                            type: 'category',
                            labels: carBrands,
                            ticks: {
                                color: 'black'
                            },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'ç‡ƒæ–™æ¶ˆè€—é‡(L/km)',
                                color: 'black'
                            },
                            ticks: { color: 'black' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        }
                    }
                }
            });
        }
        
        // 3. åˆ›å»ºå“‘é“ƒå›¾
        function createDumbbellChart() {
            const ctx = document.getElementById('dumbbellChart').getContext('2d');
            
            const cities = ['çº½çº¦', 'æ´›æ‰çŸ¶', 'èŠåŠ å“¥', 'ä¼‘æ–¯é¡¿', 'è´¹åŸ'];
            const values2013 = [0.08, 0.12, 0.15, 0.10, 0.18];
            const values2014 = [0.10, 0.15, 0.18, 0.12, 0.20];
            
            const datasets = [];
            
            // 2013å¹´æ•°æ®ç‚¹
            datasets.push({
                label: '2013å¹´',
                data: values2013.map((value, index) => ({x: value, y: index})),
                backgroundColor: 'rgba(0, 119, 190, 0.8)',
                borderColor: 'rgba(0, 119, 190, 1)',
                pointRadius: 10,
                pointStyle: 'circle',
                showLine: false
            });
            
            // 2014å¹´æ•°æ®ç‚¹
            datasets.push({
                label: '2014å¹´',
                data: values2014.map((value, index) => ({x: value, y: index})),
                backgroundColor: 'rgba(163, 196, 220, 0.8)',
                borderColor: 'rgba(163, 196, 220, 1)',
                pointRadius: 10,
                pointStyle: 'circle',
                showLine: false
            });
            
            // è¿æ¥çº¿ - ä¸ºæ¯ä¸ªåŸå¸‚åˆ›å»ºå•ç‹¬çš„çº¿æ®µ
            for (let i = 0; i < cities.length; i++) {
                const connectionData = [
                    {x: values2013[i], y: i},
                    {x: values2014[i], y: i}
                ];
                
                datasets.push({
                    label: i === 0 ? 'å˜åŒ–' : '', // åªåœ¨ç¬¬ä¸€ä¸ªæ˜¾ç¤ºå›¾ä¾‹
                    data: connectionData,
                    borderColor: 'rgba(135, 206, 250, 0.7)',
                    backgroundColor: 'transparent',
                    borderWidth: 3,
                    pointRadius: 0,
                    showLine: true,
                    tension: 0
                });
            }
            
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'åŸå¸‚æŒ‡æ ‡å˜åŒ–å¯¹æ¯” - å“‘é“ƒå›¾',
                            font: { size: 16, weight: 'bold', color: 'black' }
                        },
                        legend: {
                            labels: { color: 'black' }
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            min: -0.5,
                            max: cities.length - 0.5,
                            ticks: {
                                callback: function(value) {
                                    if (value >= 0 && value < cities.length) {
                                        return cities[Math.round(value)];
                                    }
                                    return '';
                                },
                                color: 'black'
                            },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        x: {
                            min: 0.05,
                            max: 0.22,
                            title: {
                                display: true,
                                text: 'æŒ‡æ ‡å€¼',
                                color: 'black'
                            },
                            ticks: {
                                callback: function(value) {
                                    return (value * 100).toFixed(0) + '%';
                                },
                                color: 'black'
                            },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        }
                    }
                }
            });
        }
        
        // 4. åˆ›å»ºç”˜ç‰¹å›¾
        function createGanttChart() {
            const ctx = document.getElementById('ganttChart').getContext('2d');
            
            const tasks = ['é¡¹ç›®ç¡®å®š', 'é—®å·è®¾è®¡', 'è¯•è®¿', 'é—®å·ç¡®å®š', 'å®åœ°æ‰§è¡Œ'];
            const durations = [2, 1, 1, 0.5, 3];
            const startTimes = [0, 1.5, 2, 3, 3];
            
            // åˆ›å»ºæ°´å¹³æ¡å½¢å›¾æ¨¡æ‹Ÿç”˜ç‰¹å›¾
            const barData = durations.map((duration, index) => ({
                x: startTimes[index] + duration/2,
                y: tasks.length - index - 1,
                width: duration
            }));
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: tasks,
                    datasets: [{
                        label: 'ä»»åŠ¡æŒç»­æ—¶é—´',
                        data: durations,
                        backgroundColor: 'rgba(205, 92, 92, 0.8)',
                        borderColor: 'rgba(205, 92, 92, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'é¡¹ç›®ç®¡ç†ç”˜ç‰¹å›¾',
                            font: { size: 16, weight: 'bold', color: 'black' }
                        },
                        legend: {
                            labels: { color: 'black' }
                        },
                        tooltip: {
                            callbacks: {
                                afterLabel: function(context) {
                                    const index = context.dataIndex;
                                    return `å¼€å§‹æ—¶é—´: ${startTimes[index]} å•ä½\nç»“æŸæ—¶é—´: ${startTimes[index] + durations[index]} å•ä½`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'æ—¶é—´ï¼ˆå•ä½ï¼‰',
                                color: 'black'
                            },
                            ticks: { color: 'black' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        y: {
                            ticks: { color: 'black' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        }
                    }
                }
            });
        }
        
        // 5. åˆ›å»ºäººå£é‡‘å­—å¡”
        function createPyramidChart() {
            const ctx = document.getElementById('pyramidChart').getContext('2d');
            
            const ageGroups = ['0-9', '10-19', '20-29', '30-39', '40-49'];
            const malePopulation = [50000, 48000, 45000, 42000, 38000];
            const femalePopulation = [48000, 47000, 46000, 44000, 40000];
            
            // å°†ç”·æ€§äººå£è½¬ä¸ºè´Ÿå€¼ä»¥ä¾¿å·¦å³æ˜¾ç¤º
            const maleDataForChart = malePopulation.map(value => -value);
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ageGroups,
                    datasets: [
                        {
                            label: 'ç”·æ€§',
                            data: maleDataForChart,
                            backgroundColor: 'rgba(102, 153, 255, 0.7)',
                            borderColor: 'rgba(102, 153, 255, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'å¥³æ€§',
                            data: femalePopulation,
                            backgroundColor: 'rgba(204, 102, 153, 0.7)',
                            borderColor: 'rgba(204, 102, 153, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'äººå£é‡‘å­—å¡”å›¾ - å¹´é¾„ç»“æ„åˆ†å¸ƒ',
                            font: { size: 16, weight: 'bold', color: 'black' }
                        },
                        legend: {
                            labels: { color: 'black' }
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            ticks: {
                                callback: function(value) {
                                    return Math.abs(value).toLocaleString();
                                },
                                color: 'black'
                            },
                            title: {
                                display: true,
                                text: 'äººå£æ•°é‡',
                                color: 'black'
                            },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        y: {
                            stacked: true,
                            title: {
                                display: true,
                                text: 'å¹´é¾„æ®µï¼ˆå²ï¼‰',
                                color: 'black'
                            },
                            ticks: { color: 'black' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        }
                    }
                }
            });
        }
        
        // 6. åˆ›å»ºæ¼æ–—å›¾
        function createFunnelChart() {
            const ctx = document.getElementById('funnelChart').getContext('2d');
            
            const stages = ['è®¿é—®å•†å“', 'åŠ è´­ç‰©è½¦', 'ç”Ÿæˆè®¢å•', 'æ”¯ä»˜è®¢å•', 'å®Œæˆäº¤æ˜“'];
            const conversion = [1000, 500, 300, 200, 150];
            const conversionRate = conversion.map((value, index) => 
                ((value / conversion[0]) * 100).toFixed(1) + '%'
            );
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: stages,
                    datasets: [{
                        label: 'å®¢æˆ·æ•°é‡',
                        data: conversion,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(255, 159, 64, 0.7)',
                            'rgba(255, 205, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(54, 162, 235, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(255, 205, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(54, 162, 235, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'é”€å”®æ¼æ–—å›¾ - å®¢æˆ·è½¬åŒ–æµç¨‹',
                            font: { size: 16, weight: 'bold', color: 'black' }
                        },
                        legend: {
                            labels: { color: 'black' }
                        },
                        tooltip: {
                            callbacks: {
                                afterLabel: function(context) {
                                    const index = context.dataIndex;
                                    return `è½¬åŒ–ç‡: ${conversionRate[index]}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'å®¢æˆ·æ•°é‡',
                                color: 'black'
                            },
                            ticks: { color: 'black' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        y: {
                            ticks: { color: 'black' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        }
                    }
                }
            });
        }
        
        // 7. åˆ›å»ºé›·è¾¾å›¾ï¼ˆæ›¿ä»£æ ‘çŠ¶å›¾ï¼‰
        function createRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            const crimeTypes = ['è°‹æ€æ¡ˆ', 'è¢­å‡»æ¡ˆ', 'å¼ºå¥¸æ¡ˆ', 'æŠ¢åŠ«æ¡ˆ', 'ç›—çªƒæ¡ˆ'];
            const clusters = [
                { name: 'é«˜çŠ¯ç½ªç‡ç»„', values: [15, 250, 25, 120, 400] },
                { name: 'ä¸­çŠ¯ç½ªç‡ç»„', values: [8, 180, 15, 80, 300] },
                { name: 'ä½çŠ¯ç½ªç‡ç»„', values: [5, 120, 8, 50, 200] }
            ];
            
            const datasets = clusters.map((cluster, index) => ({
                label: cluster.name,
                data: cluster.values,
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(75, 192, 192, 0.2)'
                ][index],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(75, 192, 192, 1)'
                ][index],
                pointBackgroundColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(75, 192, 192, 1)'
                ][index],
                pointBorderColor: '#fff',
                pointRadius: 4
            }));
            
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: crimeTypes,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'çŠ¯ç½ªæ¡ˆä»¶èšç±»åˆ†æ - é›·è¾¾å›¾',
                            font: { size: 16, weight: 'bold', color: 'black' }
                        },
                        legend: {
                            labels: { color: 'black' }
                        }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            ticks: {
                                color: 'black',
                                backdropColor: 'transparent'
                            },
                            pointLabels: {
                                color: 'black'
                            }
                        }
                    }
                }
            });
        }
        
        // 8. åˆ›å»ºçƒ­åŠ›å›¾ï¼ˆç”¨æ•£ç‚¹å›¾æ¨¡æ‹Ÿï¼‰
        function createHeatmapChart() {
            const ctx = document.getElementById('heatmapChart').getContext('2d');
            
            // ç”Ÿæˆåœ°å½¢é«˜åº¦æ•°æ®
            const data = [];
            const gridSize = 15;
            
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    const x = (i / (gridSize-1)) * 4 - 2; // -2åˆ°2
                    const y = (j / (gridSize-1)) * 4 - 2; // -2åˆ°2
                    
                    // åœ°å½¢é«˜åº¦å‡½æ•°
                    const height = (1 - x/2 + Math.pow(x, 5) + Math.pow(y, 3)) * Math.exp(-x*x - y*y);
                    
                    data.push({
                        x: x,
                        y: y,
                        height: height
                    });
                }
            }
            
            // æ ¹æ®é«˜åº¦è®¾ç½®é¢œè‰²
            const maxHeight = Math.max(...data.map(d => d.height));
            const minHeight = Math.min(...data.map(d => d.height));
            
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'åœ°å½¢é«˜åº¦',
                        data: data.map(d => ({x: d.x, y: d.y})),
                        backgroundColor: data.map(d => {
                            // æ ¹æ®é«˜åº¦è®¾ç½®æ¸å˜è‰²ï¼ˆæ£•è‰²åˆ°ç™½è‰²ï¼‰
                            const normalized = (d.height - minHeight) / (maxHeight - minHeight);
                            const red = 139 + Math.round(116 * (1 - normalized));
                            const green = 69 + Math.round(186 * normalized);
                            const blue = 19 + Math.round(236 * normalized);
                            return `rgba(${red}, ${green}, ${blue}, 0.8)`;
                        }),
                        pointRadius: 12,
                        pointStyle: 'rect',
                        borderWidth: 1,
                        borderColor: 'rgba(0,0,0,0.2)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'åœ°å½¢çƒ­åŠ›å›¾ - é«˜åº¦åˆ†å¸ƒ',
                            font: { size: 16, weight: 'bold', color: 'black' }
                        },
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const point = data[context.dataIndex];
                                    return [
                                        `ä½ç½®: (${point.x.toFixed(2)}, ${point.y.toFixed(2)})`,
                                        `é«˜åº¦: ${point.height.toFixed(3)}`
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Xåæ ‡',
                                color: 'black'
                            },
                            ticks: { color: 'black' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Yåæ ‡',
                                color: 'black'
                            },
                            ticks: { color: 'black' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        }
                    }
                }
            });
        }
        
        // åˆ·æ–°æ‰€æœ‰å›¾è¡¨
        function refreshAllCharts() {
            const chartCanvases = [
                'contourChart', 'stemChart', 'dumbbellChart', 'ganttChart',
                'pyramidChart', 'funnelChart', 'radarChart', 'heatmapChart'
            ];
            
            chartCanvases.forEach(id => {
                const canvas = document.getElementById(id);
                const chart = Chart.getChart(canvas);
                if (chart) {
                    chart.destroy();
                }
            });
            
            initializeAllCharts();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeAllCharts();
        });
    </script>
</body>
</html>
