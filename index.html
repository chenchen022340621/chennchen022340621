<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChemChen æ•°æ®å¯è§†åŒ–å¹³å°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #1a2a6c;
            --secondary-color: #b21f1f;
            --accent-color: #fdbb2d;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            color: white;
            min-height: 100vh;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 20px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .chart-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin: 15px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .chart-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }
        
        .btn-viz {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            border-radius: 25px;
            padding: 12px 20px;
            margin: 5px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .btn-viz:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-3px);
        }
        
        .btn-viz.active {
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.4);
        }
        
        .info-panel {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        canvas {
            max-width: 100%;
            border-radius: 10px;
        }
        
        .chart-title {
            text-align: center;
            margin-bottom: 15px;
            font-weight: 600;
            color: white;
        }
        
        .data-controls {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: rgba(255,255,255,0.9);
        }
        
        .control-group input, .control-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 5px;
            font-size: 14px;
            background: rgba(255,255,255,0.1);
            color: white;
        }
        
        .btn-custom {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .btn-custom:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ChemChen æ•°æ®å¯è§†åŒ–å¹³å°</h1>
            <p class="lead">åŠ¨æ€æ•°æ®å±•ç¤ºä¸å¤šæ¨¡å‹åˆ†æ</p>
            <div class="mt-3">
                <button class="btn-custom" onclick="generateAllRandomData()">ç”Ÿæˆéšæœºæ•°æ®</button>
                <button class="btn-custom" onclick="resetAllData()">é‡ç½®æ‰€æœ‰æ•°æ®</button>
                <a href="teaching-models.html" class="btn-custom">ğŸ“ æŸ¥çœ‹æ•™å­¦æ¨¡å‹</a>
            </div>
        </div>

        <div class="dashboard">
            <!-- æ•°å€¼è¶‹åŠ¿åˆ†æ -->
            <div class="chart-container">
                <h3 class="chart-title">ğŸ“ˆ æ•°å€¼è¶‹åŠ¿åˆ†æ</h3>
                <canvas id="trendChart" height="250"></canvas>
                <div class="data-controls">
                    <div class="control-group">
                        <label>æ•°å€¼åºåˆ— (é€—å·åˆ†éš”):</label>
                        <input type="text" id="trendData" value="1.00,0.75,0.90,0.25,0.00,-0.25,-0.50,-0.75,-1.00">
                    </div>
                    <button class="btn-custom" onclick="updateTrendChart()">æ›´æ–°å›¾è¡¨</button>
                </div>
            </div>

            <!-- æ¶ˆè´¹åˆ†å¸ƒåˆ†æ -->
            <div class="chart-container">
                <h3 class="chart-title">ğŸ’° æ¶ˆè´¹åˆ†å¸ƒåˆ†æ</h3>
                <canvas id="expenseChart" height="250"></canvas>
                <div class="data-controls">
                    <div class="control-group">
                        <label>è´­ç‰©æ¶ˆè´¹ (%):</label>
                        <input type="number" id="shopping" value="26.7" min="0" max="100" step="0.1">
                    </div>
                    <div class="control-group">
                        <label>é¤é¥®ç¾é£Ÿ (%):</label>
                        <input type="number" id="food" value="33.3" min="0" max="100" step="0.1">
                    </div>
                    <button class="btn-custom" onclick="updateExpenseChart()">æ›´æ–°åˆ†å¸ƒ</button>
                </div>
            </div>

            <!-- å¤šå›¾è¡¨ç±»å‹å±•ç¤º -->
            <div class="chart-container full-width">
                <h3 class="chart-title">ğŸ“Š å¤šå›¾è¡¨ç±»å‹å±•ç¤º</h3>
                
                <!-- å›¾è¡¨ç±»å‹é€‰æ‹© -->
                <div class="d-flex flex-wrap justify-content-center mb-4">
                    <button type="button" class="btn-viz active" onclick="showChart('line')">
                        ğŸ“ˆ æŠ˜çº¿å›¾
                    </button>
                    <button type="button" class="btn-viz" onclick="showChart('bar')">
                        ğŸ“Š æŸ±å½¢å›¾
                    </button>
                    <button type="button" class="btn-viz" onclick="showChart('pie')">
                        ğŸ¥§ é¥¼å›¾
                    </button>
                    <button type="button" class="btn-viz" onclick="showChart('doughnut')">
                        ğŸ© ç¯å½¢å›¾
                    </button>
                    <button type="button" class="btn-viz" onclick="showChart('radar')">
                        ğŸ›°ï¸ é›·è¾¾å›¾
                    </button>
                </div>

                <!-- å›¾è¡¨å±•ç¤ºåŒºåŸŸ -->
                <canvas id="multiChart" height="300"></canvas>

                <!-- å›¾è¡¨ä¿¡æ¯ -->
                <div class="info-panel">
                    <h5 id="currentChartName">æŠ˜çº¿å›¾</h5>
                    <p id="currentChartDescription" class="mb-0">
                        æŠ˜çº¿å›¾ç”¨äºæ˜¾ç¤ºæ•°æ®éšæ—¶é—´æˆ–æœ‰åºç±»åˆ«çš„å˜åŒ–è¶‹åŠ¿ï¼Œç›´è§‚å±•ç¤ºæ•°æ®çš„ä¸Šå‡æˆ–ä¸‹é™è¶‹åŠ¿ã€‚
                    </p>
                </div>
            </div>

            <!-- ç”¨æˆ·æ•°æ®åˆ†æ -->
            <div class="chart-container">
                <h3 class="chart-title">ğŸ‘¥ ç”¨æˆ·åˆ†å¸ƒåˆ†æ</h3>
                <canvas id="userChart" height="250"></canvas>
                <div class="data-controls">
                    <div class="control-group">
                        <label>ç”·æ€§æ¯”ä¾‹ (%):</label>
                        <input type="number" id="malePercent" value="45" min="0" max="100" onchange="updateUserChart()">
                    </div>
                    <div class="control-group">
                        <label>å¥³æ€§æ¯”ä¾‹ (%):</label>
                        <input type="number" id="femalePercent" value="55" min="0" max="100" onchange="updateUserChart()">
                    </div>
                </div>
            </div>

            <!-- æ•°æ®ç»Ÿè®¡é¢æ¿ -->
            <div class="chart-container">
                <h3 class="chart-title">ğŸ“‹ æ•°æ®ç»Ÿè®¡</h3>
                <div id="statsPanel" class="info-panel">
                    <div class="row text-center">
                        <div class="col-6">
                            <h4 id="totalUsers">1,234</h4>
                            <small>æ€»ç”¨æˆ·æ•°</small>
                        </div>
                        <div class="col-6">
                            <h4 id="activeRate">76.5%</h4>
                            <small>æ´»è·ƒç‡</small>
                        </div>
                    </div>
                    <div class="row text-center mt-3">
                        <div class="col-6">
                            <h4 id="avgScore">85.2</h4>
                            <small>å¹³å‡å¾—åˆ†</small>
                        </div>
                        <div class="col-6">
                            <h4 id="growthRate">+12.3%</h4>
                            <small>å¢é•¿ç‡</small>
                        </div>
                    </div>
                </div>
                <button class="btn-custom w-100 mt-3" onclick="updateStats()">æ›´æ–°ç»Ÿè®¡æ•°æ®</button>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å›¾è¡¨å®ä¾‹
        let trendChart, expenseChart, userChart, multiChart;

        // åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
        document.addEventListener('DOMContentLoaded', function() {
            initTrendChart();
            initExpenseChart();
            initUserChart();
            initMultiChart();
            updateStats();
        });

        // ========== æ•°å€¼è¶‹åŠ¿å›¾è¡¨ ==========
        function initTrendChart() {
            const ctx = document.getElementById('trendChart').getContext('2d');
            const data = getTrendData();
            
            trendChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [{
                        label: 'æ•°å€¼è¶‹åŠ¿',
                        data: data.values,
                        borderColor: '#36A2EB',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { labels: { color: 'white' } }
                    },
                    scales: {
                        y: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: 'white' }
                        },
                        x: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: 'white' }
                        }
                    }
                }
            });
        }

        function getTrendData() {
            const dataInput = document.getElementById('trendData').value;
            const values = dataInput.split(',').map(val => parseFloat(val.trim()));
            const labels = values.map((_, i) => `æ•°æ®${i+1}`);
            return { values, labels };
        }

        function updateTrendChart() {
            const data = getTrendData();
            trendChart.data.labels = data.labels;
            trendChart.data.datasets[0].data = data.values;
            trendChart.update();
        }

        // ========== æ¶ˆè´¹åˆ†å¸ƒå›¾è¡¨ ==========
        function initExpenseChart() {
            const ctx = document.getElementById('expenseChart').getContext('2d');
            const data = getExpenseData();
            
            expenseChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: data.labels,
                    datasets: [{
                        data: data.values,
                        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { labels: { color: 'white' } }
                    }
                }
            });
        }

        function getExpenseData() {
            const shopping = parseFloat(document.getElementById('shopping').value) || 0;
            const food = parseFloat(document.getElementById('food').value) || 0;
            const other = 100 - shopping - food;
            
            return {
                labels: ['è´­ç‰©', 'é¤é¥®ç¾é£Ÿ', 'å…¶ä»–æ¶ˆè´¹'],
                values: [shopping, food, other]
            };
        }

        function updateExpenseChart() {
            const data = getExpenseData();
            expenseChart.data.labels = data.labels;
            expenseChart.data.datasets[0].data = data.values;
            expenseChart.update();
        }

        // ========== ç”¨æˆ·æ•°æ®å›¾è¡¨ ==========
        function initUserChart() {
            const ctx = document.getElementById('userChart').getContext('2d');
            
            userChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['ç”·æ€§', 'å¥³æ€§'],
                    datasets: [{
                        data: [45, 55],
                        backgroundColor: ['#36A2EB', '#FF6384']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { labels: { color: 'white' } }
                    }
                }
            });
        }

        function updateUserChart() {
            const male = parseFloat(document.getElementById('malePercent').value) || 0;
            const female = parseFloat(document.getElementById('femalePercent').value) || 0;
            
            userChart.data.datasets[0].data = [male, female];
            userChart.update();
        }

        // ========== å¤šå›¾è¡¨å±•ç¤º ==========
        const chartDescriptions = {
            line: "æŠ˜çº¿å›¾ç”¨äºæ˜¾ç¤ºæ•°æ®éšæ—¶é—´æˆ–æœ‰åºç±»åˆ«çš„å˜åŒ–è¶‹åŠ¿ï¼Œç›´è§‚å±•ç¤ºæ•°æ®çš„ä¸Šå‡æˆ–ä¸‹é™è¶‹åŠ¿ã€‚",
            bar: "æŸ±å½¢å›¾ä½¿ç”¨å‚ç›´æŸ±å­æ¯”è¾ƒä¸åŒç±»åˆ«çš„æ•°æ®å€¼ï¼Œé€‚ç”¨äºæ¯”è¾ƒç¦»æ•£çš„æ•°æ®ã€‚",
            pie: "é¥¼å›¾æ˜¾ç¤ºå„éƒ¨åˆ†å æ•´ä½“çš„æ¯”ä¾‹å…³ç³»ï¼Œé€‚ç”¨äºå±•ç¤ºæ„æˆå…³ç³»ã€‚",
            doughnut: "ç¯å½¢å›¾æ˜¯é¥¼å›¾çš„å˜ä½“ï¼Œä¸­é—´æœ‰åœ†å½¢åˆ‡å£ï¼ŒåŒæ ·ç”¨äºæ˜¾ç¤ºæ¯”ä¾‹å…³ç³»ã€‚",
            radar: "é›·è¾¾å›¾æ˜¾ç¤ºå¤šå˜é‡æ•°æ®ï¼Œæ¯ä¸ªå˜é‡åœ¨ä»åŒä¸€ç‚¹å¼€å§‹çš„è½´ä¸Šè¿›è¡Œè¡¨ç¤ºã€‚"
        };

        function initMultiChart() {
            showChart('line');
        }

        function showChart(type) {
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.btn-viz').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // æ›´æ–°æè¿°
            document.getElementById('currentChartName').textContent = 
                type === 'line' ? 'æŠ˜çº¿å›¾' : 
                type === 'bar' ? 'æŸ±å½¢å›¾' : 
                type === 'pie' ? 'é¥¼å›¾' : 
                type === 'doughnut' ? 'ç¯å½¢å›¾' : 'é›·è¾¾å›¾';
            document.getElementById('currentChartDescription').textContent = chartDescriptions[type];

            // é”€æ¯æ—§å›¾è¡¨
            if (multiChart) {
                multiChart.destroy();
            }

            // åˆ›å»ºæ–°å›¾è¡¨
            const ctx = document.getElementById('multiChart').getContext('2d');
            multiChart = new Chart(ctx, getChartConfig(type));
        }

        function getChartConfig(type) {
            const commonData = {
                labels: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'],
                datasets: [{
                    label: 'æ•°æ®é›†1',
                    data: [65, 59, 80, 81, 56, 55],
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgb(255, 99, 132)'
                }]
            };

            const configs = {
                line: {
                    type: 'line',
                    data: commonData,
                    options: {
                        responsive: true,
                        scales: {
                            y: { ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' } },
                            x: { ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' } }
                        }
                    }
                },
                bar: {
                    type: 'bar',
                    data: commonData,
                    options: {
                        responsive: true,
                        scales: {
                            y: { ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' } },
                            x: { ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' } }
                        }
                    }
                },
                pie: {
                    type: 'pie',
                    data: {
                        labels: ['ç±»åˆ«A', 'ç±»åˆ«B', 'ç±»åˆ«C', 'ç±»åˆ«D'],
                        datasets: [{
                            data: [30, 25, 20, 25],
                            backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0']
                        }]
                    },
                    options: { responsive: true }
                },
                doughnut: {
                    type: 'doughnut',
                    data: {
                        labels: ['éƒ¨åˆ†1', 'éƒ¨åˆ†2', 'éƒ¨åˆ†3', 'éƒ¨åˆ†4'],
                        datasets: [{
                            data: [35, 25, 20, 20],
                            backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0']
                        }]
                    },
                    options: { responsive: true }
                },
                radar: {
                    type: 'radar',
                    data: {
                        labels: ['ç»´åº¦1', 'ç»´åº¦2', 'ç»´åº¦3', 'ç»´åº¦4', 'ç»´åº¦5'],
                        datasets: [{
                            label: 'æ•°æ®é›†1',
                            data: [85, 90, 70, 95, 80],
                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                            borderColor: 'rgb(255, 99, 132)'
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            r: {
                                angleLines: { color: 'rgba(255,255,255,0.2)' },
                                grid: { color: 'rgba(255,255,255,0.2)' },
                                pointLabels: { color: 'white' },
                                ticks: { color: 'white' }
                            }
                        }
                    }
                }
            };

            return configs[type];
        }

        // ========== ç»Ÿè®¡é¢æ¿ ==========
        function updateStats() {
            document.getElementById('totalUsers').textContent = 
                Math.floor(Math.random() * 5000 + 1000).toLocaleString();
            document.getElementById('activeRate').textContent = 
                (Math.random() * 30 + 70).toFixed(1) + '%';
            document.getElementById('avgScore').textContent = 
                (Math.random() * 20 + 80).toFixed(1);
            document.getElementById('growthRate').textContent = 
                (Math.random() > 0.5 ? '+' : '-') + (Math.random() * 20 + 5).toFixed(1) + '%';
        }

        // ========== å·¥å…·å‡½æ•° ==========
        function generateAllRandomData() {
            // è¶‹åŠ¿æ•°æ®
            const randomTrend = Array.from({length: 8}, () => (Math.random() * 2 - 1).toFixed(2));
            document.getElementById('trendData').value = randomTrend.join(',');
            updateTrendChart();

            // æ¶ˆè´¹æ•°æ®
            document.getElementById('shopping').value = (Math.random() * 50 + 20).toFixed(1);
            document.getElementById('food').value = (Math.random() * 40 + 20).toFixed(1);
            updateExpenseChart();

            // ç”¨æˆ·æ•°æ®
            const male = Math.random() * 100;
            document.getElementById('malePercent').value = male.toFixed(1);
            document.getElementById('femalePercent').value = (100 - male).toFixed(1);
            updateUserChart();

            // ç»Ÿè®¡æ•°æ®
            updateStats();

            alert('éšæœºæ•°æ®ç”Ÿæˆå®Œæˆï¼');
        }

        function resetAllData() {
            document.getElementById('trendData').value = "1.00,0.75,0.90,0.25,0.00,-0.25,-0.50,-0.75,-1.00";
            document.getElementById('shopping').value = "26.7";
            document.getElementById('food').value = "33.3";
            document.getElementById('malePercent').value = "45";
            document.getElementById('femalePercent').value = "55";
            
            updateTrendChart();
            updateExpenseChart();
            updateUserChart();
            updateStats();
            
            alert('æ•°æ®é‡ç½®å®Œæˆï¼');
        }
    </script>
</body>
</html>
